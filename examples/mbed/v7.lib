https://mbed.org/teams/Cesanta/code/v7/#7762b98d31c7
